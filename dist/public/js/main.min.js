webpackJsonp([1],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(169),l=r(c),u=n(173),p=r(u),f=n(171);$(document).ready(function(){$(".dropdown-title").hover(function(){$(this).siblings(".dropdown-content").addClass("dropdown-content_active"),$(this).find(".dropdown-arrow").addClass("dropdown-arrow_active")},function(){$(this).siblings(".dropdown-content").removeClass("dropdown-content_active"),$(this).find(".dropdown-arrow").removeClass("dropdown-arrow_active")}),$(".dropdown-content").hover(function(){$(this).siblings(".dropdown-title").find(".dropdown-arrow").addClass("dropdown-arrow_active"),$(this).addClass("dropdown-content_active")},function(){$(this).siblings(".dropdown-title").find(".dropdown-arrow").removeClass("dropdown-arrow_active"),$(this).removeClass("dropdown-content_active")})});var d=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={signedIn:e.isSignedIn(),userId:null},e}return s(t,e),i(t,[{key:"isSignedIn",value:function(){return"true"==(0,f.getCookie)("signedIn")}},{key:"setUserId",value:function(e){this.setState({userId:e})}},{key:"render",value:function(){var e=this;return React.createElement("div",{id:"react-container"},React.createElement(l.default,{setUserId:function(t){return e.setUserId(t)},userId:this.state.userId,signedIn:this.state.signedIn}),React.createElement(p.default,{userId:this.state.userId,signedIn:this.state.signedIn}))}}]),t}(React.Component);ReactDOM.render(React.createElement(d,null),document.getElementById("react-app"))},169:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(170),l=r(c),u=n(172),p=r(u),f=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),i(t,[{key:"render",value:function(){var e=this;return React.createElement("header",{className:"header"},React.createElement("div",{className:"header__nav container"},React.createElement("ul",{className:"header__navigation_left"},React.createElement("li",null,React.createElement("a",{href:"#"},React.createElement("h1",{className:"header__title"},"ExSpotify"))),React.createElement("li",null,React.createElement("a",{className:"header__nav-item",href:"#"},"Help")),React.createElement("li",null,React.createElement("div",{className:"header__services-dropdown dropdown"},React.createElement("div",{className:"header__dropdown-title dropdown-title"},React.createElement("p",{className:"header__nav-item"},"Services"),React.createElement("div",{className:"header__dropdown-arrow dropdown-arrow"})),React.createElement("div",{className:"header__dropdown-content dropdown-content"},React.createElement("ul",{className:"header__dropdown-options"},React.createElement("li",null,React.createElement("a",{className:"header__dropdown-item",href:"#"},"Google Play Music")),React.createElement("li",null,React.createElement("a",{className:"header__dropdown-item",href:"#"},"VK"))))))),this.props.signedIn?React.createElement(l.default,{setUserId:function(t){return e.props.setUserId(t)}}):React.createElement(p.default,null)))}}]),t}(React.Component);t.default=f},170:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(171),c=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={loaded:!1},e}return o(t,e),s(t,[{key:"getUserData",value:function(){var e=this;$.ajax({url:"https://api.spotify.com/v1/me",headers:{Authorization:"Bearer "+(0,i.getCookie)("access_token")}}).done(function(t){e.setState({loaded:!0,name:t.display_name?t.display_name:t.id,imgUrl:t.images[0].url}),e.props.setUserId(t.id)}).fail(function(t,n,r){(0,i.refreshToken)(function(){return e.getUserData()}),console.log("Error: "+r),console.log("Status: "+n),console.dir(t)})}},{key:"componentWillMount",value:function(){this.getUserData()}},{key:"componentDidUpdate",value:function(){$(".dropdown-title").hover(function(){$(this).siblings(".dropdown-content").addClass("dropdown-content_active"),$(this).find(".dropdown-arrow").addClass("dropdown-arrow_active")},function(){$(this).siblings(".dropdown-content").removeClass("dropdown-content_active"),$(this).find(".dropdown-arrow").removeClass("dropdown-arrow_active")}),$(".dropdown-content").hover(function(){$(this).siblings(".dropdown-title").find(".dropdown-arrow").addClass("dropdown-arrow_active"),$(this).addClass("dropdown-content_active")},function(){$(this).siblings(".dropdown-title").find(".dropdown-arrow").removeClass("dropdown-arrow_active"),$(this).removeClass("dropdown-content_active")})}},{key:"render",value:function(){return this.state.loaded?React.createElement("div",{className:"header__navigation_right header__nickname-dropdown dropdown"},React.createElement("div",{className:"header__dropdown-title dropdown-title"},React.createElement("div",{className:"header__profile-picture-wrapper",style:{backgroundImage:"url("+this.state.imgUrl+")"}}),React.createElement("p",{className:"header__nav-item"},this.state.name),React.createElement("div",{className:"header__dropdown-arrow dropdown-arrow"})),React.createElement("div",{className:"header__dropdown-content dropdown-content"},React.createElement("ul",{className:"header__dropdown-options"},React.createElement("li",{className:"header__dropdown-item"},"Settings"),React.createElement("li",{className:"header__dropdown-item",onClick:function(){return window.location.replace("/logout")}},"Logout")))):null}}]),t}(React.Component);t.default=c},171:function(e,t){"use strict";function n(e){for(var t=e+"=",n=decodeURIComponent(document.cookie),r=n.split(";"),a=0;a<r.length;a++){for(var o=r[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function r(e){console.log("Going to refresh token"),$.ajax({url:"/refresh_token",data:{refresh_token:n("refresh_token")}}).done(function(t){console.log("Refreshed"),e()})}Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=n,t.refreshToken=r},172:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),o(t,[{key:"render",value:function(){return React.createElement("a",{className:"header__nav-item header__login-btn",href:"/login"},"Login with Spotify")}}]),t}(React.Component);t.default=s},173:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=(n(171),n(174)),l=r(c),u=n(178),p=r(u),f=n(179),d=r(f),h=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.ajaxRequest=null,e.state={source:"library",library:{state:"playlist",songlist:null,playlistList:null,albumList:null,playlistSonglist:null,albumSonglist:null,selectedPlaylist:null,selectedAlbum:null},popular:{state:"intro",songlist:null},url:{state:"intro",songlist:null}},e}return s(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.signedIn?this.changeSource(null,"choose-library"):this.changeSource(null,"choose-url")}},{key:"changeSource",value:function(e,t){var n=t;switch(n||(n=e.target.id),e&&$(e.target).parents(".dropdown-content").removeClass("dropdown-content_active"),n){case"choose-library":this.setState({source:"library"});break;case"choose-popular":this.setState({source:"popular"});break;case"choose-url":this.setState({source:"url"})}}},{key:"changeUrl",value:function(){this.setState({url:{state:"intro"}})}},{key:"selectLibrarySource",value:function(e){this.setState({library:Object.assign({},this.state.library,{state:e})})}},{key:"setPlaylistList",value:function(e){this.setState({library:Object.assign({},this.state.library,{playlistList:e,selectedPlaylist:0})})}},{key:"setPlaylistSonglist",value:function(e){this.setState({library:Object.assign({},this.state.library,{playlistSonglist:e})})}},{key:"selectPlaylist",value:function(e){this.setState({library:Object.assign({},this.state.library,{playlistSonglist:null,selectedPlaylist:e})})}},{key:"selectAlbum",value:function(e){this.setState({library:Object.assign({},this.state.library,{selectedAlbum:e})})}},{key:"parseUrl",value:function(e){e.preventDefault();var t=$('input[name="playlist-url"]').val();if(this.setState({url:{state:"loading"}}),t){var n=t.match(/user\/(.*)\/playlist/)[1],r=t.match(/playlist\/(.*)$/)[1],a="https://api.spotify.com/v1/users/"+n+"/playlists/"+r;this.getPublicPlaylist(a)}}},{key:"getPublicPlaylist",value:function(e){var t=this;this.ajaxRequest=$.ajax({url:"/get-playlist",data:{playlistUrl:e}}).done(function(e){console.log(e.name),t.setState({url:{state:"playlist",songlist:e}})}).fail(function(e,n,r){t.setState({url:{state:"intro",songlist:null}}),console.log("Error: "+r),console.log("Status: "+n),console.dir(e)})}},{key:"showPlaylists",value:function(){var e=this;if(this.props.signedIn)switch(this.state.source){case"library":switch(this.state.library.state){case"playlist":return React.createElement(d.default,{userId:this.props.userId,state:this.state,setPlaylistList:function(t){return e.setPlaylistList(t)},selectPlaylist:function(t){return e.selectPlaylist(t)}});case"album":return React.createElement(d.default,{state:this.state})}}return null}},{key:"showSongList",value:function(){var e=this;if(!this.props.signedIn&&"url"!=this.state.source)return React.createElement("h3",{className:"main-section__status-message"},"You have to sign in");switch(this.state.source){case"url":switch(this.state.url.state){case"intro":return React.createElement("h3",{className:"main-section__status-message"},'Insert playlist link into field above and click "Open"');case"loading":return React.createElement("h3",{className:"main-section__status-message"},"Loading from URL...");default:return React.createElement(p.default,{state:this.state})}case"library":return React.createElement(p.default,{userId:this.props.userId,setPlaylistSonglist:function(t){return e.setPlaylistSonglist(t)},state:this.state})}}},{key:"render",value:function(){var e=this;return React.createElement("main",{className:"main"},React.createElement(l.default,{state:this.state,openUrlClick:function(t){return e.parseUrl(t)},changeSource:function(t){return e.changeSource(t)},changeUrl:function(){return e.changeUrl()},cancelRequest:function(){return e.ajaxRequest.abort()},selectLibrarySource:function(t){return e.selectLibrarySource(t)}}),React.createElement("section",{className:"main-section container"},this.showPlaylists(),this.showSongList()))}}]),t}(React.Component);t.default=h},174:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(175),l=r(c),u=n(176),p=r(u),f=n(177),d=r(f),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),i(t,[{key:"selectSourceOption",value:function(){var e=this;switch(this.props.state.source){case"library":return React.createElement(d.default,{libraryState:this.props.state.library,selectLibrarySource:function(t){return e.props.selectLibrarySource(t)}});case"popular":return null;case"url":switch(this.props.state.url.state){case"intro":return React.createElement(l.default,{openUrlClick:function(t){return e.props.openUrlClick(t)}});case"loading":return React.createElement(p.default,{onClick:function(){return e.props.cancelRequest()}});case"playlist":return React.createElement(p.default,{playlistName:this.props.state.url.songlist.name,onClick:function(){return e.props.changeUrl()}})}}}},{key:"getSourceName",value:function(){switch(this.props.state.source){case"library":return"Library";case"popular":return"Popular";case"url":return"Playlist URL"}}},{key:"render",value:function(){var e=this;return React.createElement("section",{className:"content-header"},React.createElement("div",{className:"header__nav container"},React.createElement("div",{className:"flex-item"},React.createElement("div",{className:"content-header__source-wrapper"},React.createElement("div",{className:"content-header__source-dropdown dropdown"},React.createElement("div",{className:"content-header__dropdown-title dropdown-title"},React.createElement("p",{id:"current-source",className:"content-header__nav-item"},"Source: ",this.getSourceName()),React.createElement("div",{className:"header__dropdown-arrow dropdown-arrow"})),React.createElement("div",{className:"content-header__dropdown-content dropdown-content"},React.createElement("ul",{className:"content-header__dropdown-options"},React.createElement("li",{id:"choose-library",className:"content-header__dropdown-item",onClick:function(t){return e.props.changeSource(t)}},"Library"),React.createElement("li",{id:"choose-popular",className:"content-header__dropdown-item",onClick:function(t){return e.props.changeSource(t)}},"Popular"),React.createElement("li",{id:"choose-url",className:"content-header__dropdown-item",onClick:function(t){return e.props.changeSource(t)}},"URL")))))),React.createElement("div",{className:"content-header__source-options"},this.selectSourceOption()),React.createElement("div",{className:"flex-item"},React.createElement("a",{className:"content-header__nav-item content-header__go-btn",href:"#"},"Go!"))))}}]),t}(React.Component);t.default=h},175:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={value:""},e.handleChange=e.handleChange.bind(e),e}return a(t,e),o(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this;return React.createElement("form",{className:"content-header__url-source-wrapper transition",onSubmit:function(t){return e.props.openUrlClick(t)}},React.createElement("input",{className:"content-header__url-input",type:"text",name:"playlist-url",value:this.state.value,onChange:this.handleChange,placeholder:"Playlist url"}),React.createElement("input",{type:"submit",value:"Open",id:"open-url-btn",className:"content-header__url-button"}))}}]),t}(React.Component);t.default=s},176:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),o(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"content-header__url-playlist-wrapper"},React.createElement("h3",{className:"content-header__nav-item content-header__url-playlist-name"},this.props.playlistName?this.props.playlistName:"Loading..."),React.createElement("a",{id:"change-url-btn",className:"content-header__url-button",onClick:function(){return e.props.onClick()}},this.props.playlistName?"Close":"Cancel"))}}]),t}(React.Component);t.default=s},177:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;$(".content-header__library-source").click(function(t){switch(t.target.id){case"choose-playlists":e.props.selectLibrarySource("playlist");break;case"choose-albums":e.props.selectLibrarySource("album");break;case"choose-songs":e.props.selectLibrarySource("songs")}})}},{key:"isActive",value:function(e){var t;return t=this.props.libraryState.state==e?" content-header__library-source_active":""}},{key:"render",value:function(){return React.createElement("div",{className:"content-header__library-source-wrapper content-header__library-source-wrapper_active"},React.createElement("ul",null,React.createElement("li",{id:"choose-playlists",className:"content-header__nav-item content-header__library-source"+this.isActive("playlist")},"Playlists"),React.createElement("li",{id:"choose-albums",className:"content-header__nav-item content-header__library-source"+this.isActive("album")},"Albums"),React.createElement("li",{id:"choose-songs",className:"content-header__nav-item content-header__library-source"+this.isActive("songs")},"Songs")))}}]),t}(React.Component);t.default=s},178:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(171),c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),s(t,[{key:"componentDidUpdate",value:function(){var e=this;$(".main-section__song-row").click(function(e){console.log(this),$(this).find(".main-section__song-checkbox").trigger("change")}),$(".main-section__song-checkbox").change(function(t){$(t.target).is(":checked")?($(t.target).prop("checked",!1),"playlist"==e.props.state.source&&$(".main-section__playlist-summary_active").find(".main-section__playlists-checkbox").prop("checked",!1)):($(t.target).prop("checked",!0),"playlist"==e.props.state.source&&e.isAllSongsChecked()&&$(".main-section__playlist-summary_active").find(".main-section__playlists-checkbox").prop("checked",!0))})}},{key:"isAllSongsChecked",value:function(){var e=!0,t=$(".main-section__song-checkbox");return t.each(function(){if(!$(this).prop("checked"))return e=!1}),e}},{key:"getPlaylist",value:function(e){var t=this;$.ajax({url:"https://api.spotify.com/v1/users/"+e.owner.id+"/playlists/"+e.id,headers:{Authorization:"Bearer "+(0,i.getCookie)("access_token")}}).done(function(e){console.log(e),t.props.setPlaylistSonglist(e)}).fail(function(n,r,a){(0,i.refreshToken)(function(){return t.getPlaylist(e)}),console.log("Error: "+a),console.log("Status: "+r),console.dir(n)})}},{key:"convertDuration",value:function(e){var t=Math.floor(e/1e3/60),n=e%6e4;return t+":"+n.toString().substring(0,2)}},{key:"parseArtists",value:function(e){var t="",n=!0,r=!1,a=void 0;try{for(var o,s=e.track.artists[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;t+=i.name,e.track.artists.indexOf(i)!=e.track.artists.length-1&&(t+=", ")}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return t}},{key:"parseSong",value:function(e){return React.createElement("tr",{key:e.track.id,className:"main-section__song-row"},React.createElement("td",null,React.createElement("input",{id:"input",className:"main-section__song-checkbox",type:"checkbox"})),React.createElement("td",null,e.track.name),React.createElement("td",null,this.parseArtists(e)),React.createElement("td",null,e.track.album.name),React.createElement("td",null,this.convertDuration(e.track.duration_ms)))}},{key:"renderPlaylist",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,s=e.tracks.items[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;t.push(this.parseSong(i))}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return React.createElement("section",{className:"main-section__songs data-simplebar"},React.createElement("table",{className:"main-section__songs-list"},React.createElement("tr",null,React.createElement("th",{className:"main-section__check-col"},"Check"),React.createElement("th",{className:"main-section__song-col"},"Song"),React.createElement("th",{className:"main-section__artist-col"},"Artist"),React.createElement("th",{className:"main-section__album-col"},"Album"),React.createElement("th",{className:"main-section__duration-col"},"Duration")),t))}},{key:"render",value:function(){switch(this.props.state.source){case"url":return this.renderPlaylist(this.props.state.url.songlist);case"library":switch(this.props.state.library.state){case"playlist":return this.props.state.library.playlistSonglist?this.renderPlaylist(this.props.state.library.playlistSonglist):(this.props.state.library.playlistList&&this.getPlaylist(this.props.state.library.playlistList.items[this.props.state.library.selectedPlaylist]),React.createElement("h3",{className:"main-section__status-message"},"Loading songs..."));case"album":return React.createElement("h3",null,"Undefined album");case"songs":return React.createElement("h3",null,"Undefined songs")}default:return React.createElement("h3",null,"Undefined")}}}]),t}(React.Component);t.default=c},179:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(171),l=n(168),u=r(l),p=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),i(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){$(".main-section__playlists-list").length&&new u.default($(".main-section__playlists-list")[0]),$(".main-section__playlist-summary").click(function(e){$(".main-section__playlist-summary").removeClass("main-section__playlist-summary_active"),$(this).addClass("main-section__playlist-summary_active")}),$(".main-section__playlists-checkbox, .main-section__playlists-checkbox-label").click(function(e){e.stopPropagation()}),$(".main-section__playlists-checkbox").change(function(e){$(this).parent().hasClass("main-section__playlist-summary_active")&&($(this).prop("checked")?$(".main-section__song-checkbox").prop("checked",!0):$(".main-section__song-checkbox").prop("checked",!1))})}},{key:"getUserPlaylists",value:function(){var e=this;$.ajax({url:"https://api.spotify.com/v1/me/playlists",headers:{Authorization:"Bearer "+(0,c.getCookie)("access_token")}}).done(function(t){e.props.setPlaylistList(t),console.log("Loaded playlists"),console.log(e.props.state)}).fail(function(t,n,r){(0,c.refreshToken)(function(){return e.getUserPlaylists()}),console.log("Error: "+r),console.log("Status: "+n),console.dir(t)})}},{key:"parsePlaylist",value:function(e,t){var n=this,r=this.props.state.library.playlistList.items.indexOf(e);return React.createElement("div",{key:e.id,className:"main-section__playlist-summary"+(t?" main-section__playlist-summary_active":""),onClick:function(){return n.props.selectPlaylist(r)}},React.createElement("img",{className:"main-section__playlist-cover",src:e.images.length?e.images[0].url:"img/album art.jpg",alt:"Album cover"}),React.createElement("div",{className:"main-section__playlist-text"},React.createElement("h3",{className:"main-section__playlist-name"},e.name),React.createElement("h4",{className:"main-section__playlist-author"},"by ",e.owner.id)),React.createElement("input",{id:e.id,className:"main-section__playlists-checkbox css-checkbox",type:"checkbox"}),React.createElement("label",{className:"main-section__playlists-checkbox-label css-label",htmlFor:e.id}))}},{key:"renderList",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,s=e.items[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;0==e.items.indexOf(i)?t.push(this.parsePlaylist(i,!0)):t.push(this.parsePlaylist(i))}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return React.createElement("aside",{className:"main-section__playlists-list"},t);
}},{key:"render",value:function(){return this.props.userId&&null==this.props.state.library.playlistList&&this.getUserPlaylists(),this.props.state.library.playlistList?this.renderList(this.props.state.library.playlistList):React.createElement("h3",{className:"main-section__playlists-status"},"Loading playlists...")}}]),t}(React.Component);t.default=p}});